# alipay-bot
–ë–æ—Ç –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –Ω–∞ Alipay + –∑–∞—Ä–∞–±–æ—Ç–æ–∫
from aiogram import Bot, Dispatcher, types, executor
from aiogram.contrib.fsm_storage.memory import MemoryStorage
from aiogram.dispatcher import FSMContext
from aiogram.dispatcher.filters.state import State, StatesGroup
import os

API_TOKEN = os.getenv("BOT_TOKEN")
PAYMENT_URL = "https://google.com"  # ‚Üê –ó–∞–º–µ–Ω–∏—à—å –Ω–∞ Paybox

bot = Bot(token=API_TOKEN)
storage = MemoryStorage()
dp = Dispatcher(bot, storage=storage)

class Calculator(StatesGroup):
    waiting_for_sum = State()

def start_keyboard():
    kb = types.InlineKeyboardMarkup()
    kb.add(
        types.InlineKeyboardButton("–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –≤—ã–≥–æ–¥—É", callback_data="calc"),
        types.InlineKeyboardButton("–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ –∫—É—Ä—Å", callback_data="info")
    )
    return kb

def result_keyboard():
    kb = types.InlineKeyboardMarkup()
    kb.add(
        types.InlineKeyboardButton("–ö—É–ø–∏—Ç—å –∫—É—Ä—Å –∑–∞ 4 990‚Ç∏", url=PAYMENT_URL),
        types.InlineKeyboardButton("–£–∑–Ω–∞—Ç—å –ø—Ä–æ –∑–∞—Ä–∞–±–æ—Ç–æ–∫", callback_data="earnings")
    )
    return kb

def info_keyboard():
    kb = types.InlineKeyboardMarkup()
    kb.add(types.InlineKeyboardButton("–ö—É–ø–∏—Ç—å –∫—É—Ä—Å –∑–∞ 4 990‚Ç∏", url=PAYMENT_URL))
    return kb

def earnings_keyboard():
    kb = types.InlineKeyboardMarkup()
    kb.add(types.InlineKeyboardButton("–ö—É–ø–∏—Ç—å –∫—É—Ä—Å –∑–∞ 4 990‚Ç∏", url=PAYMENT_URL))
    return kb

@dp.message_handler(commands=['start'])
async def cmd_start(message: types.Message):
    text = """
–ü—Ä–∏–≤–µ—Ç!
–ü—Ä–∏–≤–µ—Ç, first_name!

–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ —ç–∫–æ–Ω–æ–º–∏—Ç—å –æ—Ç 5% –Ω–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ Alipay ‚Äî –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∫ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫!

üí∞ –ö—É—Ä—Å –ø–æ –º–µ—Ç–æ–¥—É: 74.5‚Ç∏ –∑–∞ 1¬•  
üî¥ –£ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤: 78.6‚Ç∏ –∑–∞ 1¬•  
üî¥ –û–±–º–µ–Ω–Ω–∏–∫ –ú–ò–ì: 77.3‚Ç∏ –∑–∞ 1¬•  
(–∏–Ω—Ñ–æ –Ω–∞ 16.11.2025)

–≠–∫–æ–Ω–æ–º–∏—è: –æ—Ç 4‚Ç∏ —Å –∫–∞–∂–¥–æ–≥–æ —é–∞–Ω—è!

‚ö° 90% –∫—Ä—É–ø–Ω—ã—Ö –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤ –≤ –ö–ó –∏ –ö–† –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç–æ—Ç —Å–ø–æ—Å–æ–±  
(–æ–Ω–∏ –Ω–µ –≥–æ–≤–æ—Ä—è—Ç –∫–ª–∏–µ–Ω—Ç–∞–º)

–£–∂–µ 20+ –Ω–∞—à–∏—Ö —É—á–µ–Ω–∏–∫–æ–≤ —ç–∫–æ–Ω–æ–º—è—Ç 50-100 —Ç—ã—Å.‚Ç∏/–º–µ—Å  
–û–¥–∏–Ω –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç 300-500 —Ç—ã—Å.‚Ç∏/–º–µ—Å –∫–∞–∫ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫

–ß—Ç–æ —Ö–æ—á–µ—à—å —Å–¥–µ–ª–∞—Ç—å?

"""
    await message.answer(text, reply_markup=start_keyboard())

@dp.callback_query_handler(lambda c: c.data in ['calc', 'info', 'earnings'])
async def process_callback(call: types.CallbackQuery, state: FSMContext):
    if call.data == 'calc':
        await call.message.edit_text(
            "–í–≤–µ–¥–∏ —Å—É–º–º—É, –∫–æ—Ç–æ—Ä—É—é –æ–±—ã—á–Ω–æ –ø–æ–ø–æ–ª–Ω—è–µ—à—å (–≤ —Ç–µ–Ω–≥–µ):\n\n–ù–∞–ø—Ä–∏–º–µ—Ä: 100000",
            reply_markup=None
        )
        await Calculator.waiting_for_sum.set()

    elif call.data == 'info':
        text = """
–£—Å—Ç–∞–ª–∏ –∂–¥–∞—Ç—å –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞ –∏ –ø–µ—Ä–µ–ø–ª–∞—á–∏–≤–∞—Ç—å? –≠—Ç–æ—Ç –∫—É—Ä—Å —Å–¥–µ–ª–∞–µ—Ç –≤–∞—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–º –∑–∞ 24 —á–∞—Å–∞

üîπ –ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ:
 ‚Ä¢ 12 –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –≤–∏–¥–µ–æ-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π —Å –æ–∑–≤—É—á–∫–æ–π –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏: –æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö –Ω—É–∂–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º –¥–æ –∑–∞—á–∏—Å–ª–µ–Ω–∏—è —é–∞–Ω–µ–π –Ω–∞ –≤–∞—à Alipay/WeChat.

 ‚Ä¢ –ü–æ—à–∞–≥–æ–≤—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø—Ä–æ—Å—Ç—ã–º —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–º —è–∑—ã–∫–æ–º ‚Äî —Ä–∞–∑–±–µ—Ä—ë—Ç—Å—è –¥–∞–∂–µ –Ω–æ–≤–∏—á–æ–∫.

 ‚Ä¢ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞ –≤ –±—É–¥–Ω–∏–µ –¥–Ω–∏.

 ‚Ä¢ –ß–µ–∫-–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: 12 –ø—Ä–∞–≤–∏–ª + –±–æ–Ω—É—Å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (—Ç—â–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–Ω–Ω—ã–µ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–±–µ—Ä–µ–≥—É—Ç –æ—Ç —Å–∞–º—ã—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∏ –æ–ø–∞—Å–Ω—ã—Ö –æ—à–∏–±–æ–∫)

 ‚Ä¢ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º.
 ‚Ä¢
‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ:

 ‚Ä¢ –ë–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç–µ –∂–¥–∞—Ç—å –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞ —á–∞—Å–∞–º–∏ ‚Äî —Å–º–æ–∂–µ—Ç–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.

 ‚Ä¢ –°–º–æ–∂–µ—Ç–µ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø–µ—Ä–≤–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ Alipay/wechat —É–∂–µ —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞ –ø–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.

 ‚Ä¢ –ë—É–¥–µ—Ç–µ –ø–æ–ø–æ–ª–Ω—è—Ç—å –ø–æ –∫—É—Ä—Å—É –≤—ã–≥–æ–¥–Ω–µ–µ, —á–µ–º —É –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤ –∏ –æ–±–º–µ–Ω–Ω–∏–∫–∞ –ú–∏–≥.  üö®–ì–ê–†–ê–ù–¢–ò–†–£–Æ!

 ‚Ä¢ –ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ —Å–º–æ–∂–µ—Ç–µ —Å–∞–º–∏ —Å—Ç–∞—Ç—å –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–º –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è—Ö (–µ—Å—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –Ω–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ –æ—Ç –∞–≤—Ç–æ—Ä–∞).

–í—ã –æ–∫—É–ø–∏—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫—É—Ä—Å–∞ —É–∂–µ –Ω–∞ –ø–µ—Ä–≤—ã—Ö 1‚Äì2 –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è—Ö
  üíµ –°—Ç–æ–∏–º–æ—Å—Ç—å: 4 990‚Ç∏
‚ÄºÔ∏è —Ü–µ–Ω–∞ –¥–ª—è –ø–µ—Ä–≤—ã—Ö 100 –∫–ª–∏–µ–Ω—Ç–æ–≤

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞ —Ç—ã —Å–º–æ–∂–µ—à—å –Ω–µ —Ç–æ–ª—å–∫–æ —ç–∫–æ–Ω–æ–º–∏—Ç—å, –Ω–æ –∏ –ø–æ–º–æ–≥–∞—Ç—å –¥—Ä—É–≥–∏–º –∑–∞ –∫–æ–º–∏—Å—Å–∏—é 3-5% ‚Äî —ç—Ç–æ –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥!
"""
        await call.message.edit_text(text, reply_markup=info_keyboard())

    elif call.data == 'earnings':
        text = """
–ö–ê–ö –ó–ê–†–ê–ë–ê–¢–´–í–ê–¢–¨ –ö–ê–ö –ü–û–°–†–ï–î–ù–ò–ö:

–ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫—É—Ä—Å–∞ —Ç—ã —É–∑–Ω–∞–µ—à—å –≤—Å—é —Å—Ö–µ–º—É –∏ —Å–º–æ–∂–µ—à—å:

–ü–æ–º–æ–≥–∞—Ç—å –¥—Ä—É–≥–∏–º –ø–æ–ø–æ–ª–Ω—è—Ç—å Alipay –∑–∞ –∫–æ–º–∏—Å—Å–∏—é 3-5%
–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç 50 000‚Ç∏ –¥–æ 100 000‚Ç∏ –≤ –º–µ—Å—è—Ü
–†–∞–±–æ—Ç–∞—Ç—å —É–¥–∞–ª—ë–Ω–Ω–æ –≤ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è

–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞:
–ï—Å–ª–∏ 10 —á–µ–ª–æ–≤–µ–∫ –≤ –º–µ—Å—è—Ü –ø–µ—Ä–µ–≤–æ–¥—è—Ç –ø–æ 300 000‚Ç∏, —Ç–≤–æ–π –¥–æ—Ö–æ–¥ –ø—Ä–∏ –∫–æ–º–∏—Å—Å–∏–∏ 4%:
10 √ó 300 000‚Ç∏ √ó 4% = 120 000‚Ç∏

–í –∫—É—Ä—Å–µ –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å: "–ö–∞–∫ —Å—Ç–∞—Ç—å –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–º –∏ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤"

–í—Å—ë —á—Ç–æ –Ω—É–∂–Ω–æ ‚Äî –ø—Ä–æ–π—Ç–∏ –∫—É—Ä—Å, –æ—Å–≤–æ–∏—Ç—å —Å—Ö–µ–º—É, –∏ –Ω–∞—á–∞—Ç—å –ø–æ–º–æ–≥–∞—Ç—å –¥—Ä—É–≥–∏–º!
"""
        await call.message.edit_text(text, reply_markup=earnings_keyboard())

@dp.message_handler(state=Calculator.waiting_for_sum)
async def process_sum(message: types.Message, state: FSMContext):
    if not message.text.replace(' ', '').isdigit():
        await message.answer("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏ —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 100000)")
        return

    suma = int(message.text.replace(' ', ''))
    await state.update_data(suma=suma)

    platform_yuan = suma / 74.5
    broker_yuan = suma / 78.6
    savings = (platform_yuan - broker_yuan) * 74.5

    text = f"""
–¢–í–û–Ø –í–´–ì–û–î–ê:

–ü—Ä–∏ —Å—É–º–º–µ {suma:,}‚Ç∏:

–ù–∞—à–∞ –ø–ª–æ—â–∞–¥–∫–∞: ~{platform_yuan:,.0f}¬•
–ü–æ—Å—Ä–µ–¥–Ω–∏–∫–∏: ~{broker_yuan:,.0f}¬•

–≠–∫–æ–Ω–æ–º–∏—è: ~{savings:,.0f}‚Ç∏ –∑–∞ —Ä–∞–∑!

–ö—É—Ä—Å –æ–∫—É–ø–∏—Ç—Å—è –ø–æ—Å–ª–µ 2-3 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π!

–ê –µ—â—ë: –û—Å–≤–æ–∏–≤ —Å—Ö–µ–º—É, —Ç—ã —Å–º–æ–∂–µ—à—å –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∫ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫ –¥–ª—è –¥—Ä—É–≥–∏—Ö! –ú–Ω–æ–≥–∏–µ –Ω–∞—à–∏ —É—á–µ–Ω–∏–∫–∏ —É–∂–µ –¥–µ–ª–∞—é—Ç 50-100 —Ç—ã—Å‚Ç∏/–º–µ—Å –Ω–∞ —ç—Ç–æ–º.
"""
    await message.answer(text, reply_markup=result_keyboard())
    await state.finish()

if __name__ == '__main__':
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...")
    executor.start_polling(dp, skip_updates=True)
